<!DOCTYPE HTML>
<html>
    <head>
        <title>Физическое моделирование воды</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div id="A4">
            <p id="section">
                Физическое моделирование воды
            </p>
            
            <p id="small">
                (https://gamedev.ru/code/articles/?id=4205)
            </p>

            <p id="plane">
                Эффект водной глади является желанным гостем в трехмерной графике. 
                В краткой заметке я попытаюсь рассказать про физическое моделирование. 
                Побудительными мотивами являются следующие обстоятельства. Во-первых,
                довольно абстрактная <i>mIRC</i> лекция <i>Yann L.</i>, посвященная моделированию воды. 
                Безусловно очень компетентного и знающего человека. Однако, 
                в лекции допущены грубые неточности. Его реализация (которая, вопреки 
                заявленному, не имеет к уравнению Навье-Стокса ни малейшего отношения) 
                не является оптимальной с точки зрения сеточных методов решения дифференциальных
                уравнений. В короткий промежуток времени мне на глаза попалось и другое 
                воплощение. Тоже весьма некачественное.
            </p>

            <p id="plane">
                В заметке будет рассказано о самом общеупотребительном сеточном методе решения 
                уравнения колебаний: 
            </p>

            <math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
                <semantics>
                 <mrow>
                  <mfrac>
                   <mrow>
                    <msup>
                     <mi>d</mi>
                     <mn>2</mn>
                    </msup>
                    <mi>U</mi>
                   </mrow>
                   <msup>
                    <mi mathvariant="italic">dt</mi>
                    <mn>2</mn>
                   </msup>
                  </mfrac>
                  <mo stretchy="false">=</mo>
                  <mrow>
                   <mfrac>
                    <mrow>
                     <msup>
                      <mi>d</mi>
                      <mn>2</mn>
                     </msup>
                     <mi>U</mi>
                    </mrow>
                    <msup>
                     <mi mathvariant="italic">dx</mi>
                     <mn>2</mn>
                    </msup>
                   </mfrac>
                   <mo stretchy="false">+</mo>
                   <mfrac>
                    <mrow>
                     <msup>
                      <mi>d</mi>
                      <mn>2</mn>
                     </msup>
                     <mi>U</mi>
                    </mrow>
                    <msup>
                     <mi mathvariant="italic">dy</mi>
                     <mn>2</mn>
                    </msup>
                   </mfrac>
                  </mrow>
                 </mrow>
                 <annotation encoding="StarMath 5.0">{ d^2 U } over { dt^2 } = { d^2 U } over { dx^2 } + { d^2 U } over { dy^2 }</annotation>
                </semantics>
               </math>

            <p id="plane">
               Здесь <i>t</i> - время, <i>x,y</i> - координаты. Решая это уравнение, мы получим очень 
               реалистичную поверхность воды. Кроме того, в статье будет приведен очень быстрый 
               (и правильный с точки зрения математики) расчет нормалей без вычисления обратного 
               квадратного корня и векторных произведений.
            </p>

            <p id="plane">
                Не надо пугаться страшных непонятных буковок в уравнении (*). Дальнейшее изложение 
                не требует понимания того, что именно там написано.
            </p>

            <p id="plane">
                Итак, некоторые определения: вершина (нормаль и координата), и массив, содержащий числа. 
                Эти самые числа будут интерпретированы как высота поверхности воды в регулярной сетке. 
                Нам надо завести два таких массива, и мы будем переключаться между ними по надобности. 
            </p>

            <p id="code">
            <code>
            struct vertex<br>
            {<br>
            &emsp; float coo[3];<br>
            &emsp; float nor[3];<br>
	        };<br>
            <br>
	        struct field<br>
	        {<br>
            &emsp; float U[128][128];<br>
	        };<br>
            <br>
	        vertex vertices[128][128];<br>
	        field A,B;<br>
            field *p=&A,*n=&B;<br>
            </code>
            </p>

            <p id="tip">
                А вот и основной шаг программы:
            </p>

            <p id="subsection">
                
            </p>

            <p id="tip">
                
            </p>

            <p id="plane">
               
            </p>
        
            <p id="subsection">
               
            </p>

            <p id="tip">
                
            </p>

            <p id="plane">
                
            </p>
        </page>
    </body>
</html>